angular.module("eu.crismaproject.worldstateAnalysis.demoApp",["eu.crismaproject.worldstateAnalysis.demoApp.controllers","eu.crismaproject.worldstateAnalysis.directives","eu.crismaproject.worldstateAnalysis.services","de.cismet.crisma.widgets.worldstateTreeWidget","mgcrea.ngStrap"]),angular.module("eu.crismaproject.worldstateAnalysis.demoApp.controllers",["de.cismet.crisma.ICMM.Worldstates","de.cismet.cids.rest.collidngNames.Nodes","de.cismet.crisma.ICMM.services"]),angular.module("eu.crismaproject.worldstateAnalysis.controllers",["nvd3ChartDirectives","eu.crismaproject.worldstateAnalysis.services","ngDialog"]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.criteriaEmphasesController",["$scope",function(a){"use strict";var b;b=this,this.updateCriteriaEmphases=function(){var b,c;if(a.critEmphInternal)for(b=0;b<a.critEmphInternal.length;b++)c=a.critEmphInternal[b],a.criteriaEmphases[b]?a.criteriaEmphases[b].criteriaEmphasis=c.criteriaEmphasis:a.criteriaEmphases.push({indicator:c.indicator,criteriaEmphasis:c.criteriaEmphasis})},this.updateInternalCriteriaEmphases=function(){var b,c,d;c=[];for(d in a.indicatorMap)a.indicatorMap.hasOwnProperty(d)&&(b=!1,a.criteriaEmphases&&0!==a.criteriaEmphases.length&&a.criteriaEmphases.forEach(function(e){e.indicator.displayName===a.indicatorMap[d].displayName&&(b=!0,c.push(e))}),b||c.push({indicator:a.indicatorMap[d],criteriaEmphasis:100}));a.critEmphInternal=c},a.$watch("critEmphInternal",function(){angular.equals(a.criteriaEmphases,a.critEmphInternal)||b.updateCriteriaEmphases()},!0),a.knobMax=100,a.knobOptions={width:100,height:80,displayInput:!0,angleOffset:-125,angleArc:250},a.criteriaEmphases=a.criteriaEmphases||[],a.indicatorMap={},a.$watch("indicatorMap",function(){a.indicatorMap&&0!==Object.keys(a.indicatorMap).length&&b.updateInternalCriteriaEmphases()},!0),a.$watch("criteriaEmphases",function(){angular.equals(a.criteriaEmphases,a.critEmphInternal)||(b.updateInternalCriteriaEmphases(),a.criteriaEmphases=a.critEmphInternal)},!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.CriteriaFunctionManagerDirectiveController",["$scope","de.cismet.crisma.ICMM.Worldstates",function(a,b){"use strict";var c;a.editable=[],a.indicators=[],a.currentIntervalFunctions=[],a.selectedCriteriaFunctionIndex=-1,a.tooltipDelete={title:"Delete this criteria function"},a.tooltipAdd={normaltitle:"Create a new criteria function",disabledTitle:"Can not create criteria function. Select a worldstate first",title:""},a.tooltipSave={title:"Save changes"},a.tooltipRename={title:"Rename criteria function"},a.tooltipRenameDone={title:"Done"},a.tooltipImportFromFile={title:"Import Criteria Function from File"},a.addCriteriaFunction=function(){var b,c=[];if(!a.listItemsDisabled){for(b=0;b<a.indicators.length;b++)c.push({indicator:a.indicators[b].displayName,lowerBoundary:{criteriaValue:0,indicatorValue:0},upperBoundary:{criteriaValue:100,indicatorValue:0},intervals:[]});a.criteriaFunctionSet.push({name:"Criteria function "+(a.criteriaFunctionSet.length+1),criteriaFunctions:c}),a.editable.push(!1)}},a.removeCriteriaFunction=function(){a.criteriaFunctionSet.splice(a.selectedCriteriaFunctionIndex,1)},a.getListItemClass=function(b){var c="list-group-item";return a.listItemsDisabled&&(c+=" disabled"),a.selectedCriteriaFunctionIndex===b&&(c+=" list-group-item-info"),c},a.setSelectedCriteriaFunction=function(b){a.listItemsDisabled||(a.selectedCriteriaFunctionIndex=b,a.currentCriteriaFunction=a.criteriaFunctionSet[a.selectedCriteriaFunctionIndex])},a.getButtonStyle=function(){return{color:a.listItemsDisabled?"#CCC":"#fff"}},a.listItemsDisabled=a.indicators&&a.indicators.length<=0?!0:!1,a.tooltipAdd.title=a.listItemsDisabled?a.tooltipAdd.disabledTitle:a.tooltipAdd.normaltitle,a.$watchCollection("worldstates",function(c,d){var e,f,g,h;if(c!==d){if(a.worldstates&&0===a.worldstates.length)a.indicators=[];else if(0===a.indicators.length){g=b.utils.stripIccData([a.worldstates[0]],!1)[0];for(e in g.data)if(g.data.hasOwnProperty(e)){h=g.data[e];for(f in h)h.hasOwnProperty(f)&&"displayName"!==f&&"iconResource"!==f&&a.indicators.push(h[f])}}a.listItemsDisabled=a.indicators&&a.indicators.length<=0?!0:!1,a.tooltipAdd.title=a.listItemsDisabled?a.tooltipAdd.disabledTitle:a.tooltipAdd.normaltitle,a.listItemsDisaled&&(a.selectedCriteriaFunctionIndex=-1)}}),a.fileAPIAvailable=window.File&&window.FileReader&&window.FileList&&window.Blob?!0:!1,c=function(b){return function(c){var d;try{d=JSON.parse(c.target.result),a.criteriaFunctionSet.push(d),a.$apply()}catch(e){console.error("Could not read CriteriaFunction File: "+b.name)}}},a.$watch("criteriaFunctionFile",function(b,d){var e,f,g;if(!angular.equals(b,d)&&b)for(e=0;e<a.criteriaFunctionFile.length;e++){f=a.criteriaFunctionFile[e],g=new FileReader,g.onload=c(f);try{g.readAsText(f)}catch(h){console.error("Could not read CriteriaFunction File: "+f.name)}}})}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.CriteriaRadarChartDirectiveController",["$scope","eu.crismaproject.worldstateAnalysis.services.CriteriaCalculationService",function(a,b){"use strict";a.legendItems=[],a.convertToChartDataStructure=function(c){var d,e,f,g,h,i,j,k,l,m,n;if(a.criteriaFunction){for(k=[],m=[],d=0;d<c.length;d++){l=[],f=c[d].data,m.push(c[d].name);for(g in f)if(f.hasOwnProperty(g)){h=f[g];for(i in h)if(h.hasOwnProperty(i)&&"displayName"!==i&&"iconResource"!==i){for(j=h[i],e=0;e<a.criteriaFunction.criteriaFunctions.length;e++)if(a.criteriaFunction.criteriaFunctions[e].indicator===j.displayName){n=a.criteriaFunction.criteriaFunctions[e];break}l.push({axis:a.useNumbers?l.length+1:j.displayName,tooltip:j.displayName,value:Math.round(100*b.calculateCriteria(j.value,n))/100})}}k.push(l)}return[k,m]}}}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.DecisionStrategyDirectiveController",["$scope","de.cismet.crisma.ICMM.Worldstates",function(a,b){"use strict";var c;c=this,this.extractIndicators=function(c){var d,e,f,g,h,i;if(i={},a.indicatorSize=0,c&&c.length>0)for(h=0;h<c.length;h++){f=b.utils.stripIccData([c[h]],!1)[0];for(d in f.data)if(f.data.hasOwnProperty(d)){g=f.data[d];for(e in g)g.hasOwnProperty(e)&&"displayName"!==e&&"iconResource"!==e&&(i[e]||(i[e]=g[e],a.indicatorSize++))}}return i},a.decisionStrategy=a.decisionStrategy||{},a.indicatorSize=a.indicatorSize||0,a.indicatorMap=a.indicatorMap||{},a.$watch("worldstates",function(){a.indicatorMap=c.extractIndicators(a.worldstates)},!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.decisionStrategyManagerDirectiveController",["$scope","de.cismet.crisma.ICMM.Worldstates","eu.crismaproject.worldstateAnalysis.services.AnalysisService",function(a,b,c){"use strict";var d;a.editable=[],a.currentIntervalFunctions=[],a.selectedDecisionStrategyIndex=-1,a.tooltipDelete={title:"Delete this decision strategy"},a.tooltipAdd={normaltitle:"Create a new decision strategy",disabledTitle:"Can not create Decision Strategy. Select a worldstate first",title:""},a.tooltipSave={title:"Save changes"},a.tooltipRename={title:"Rename decision strategy"},a.tooltipRenameDone={title:"Done"},a.tooltipImportFromFile={title:"Import Criteria Function from File"},a.addDecisionStrategy=function(){var b,d,e=[];if(!a.listItemsDisabled){for(b=0;b<a.indicatorVector.length;b++)d=a.indicatorVector[b],e.push({indicator:d,criteriaEmphasis:100});a.decisionStrategies.push({name:"Decision Strategy "+(a.decisionStrategies.length+1),criteriaEmphases:e,satisfactionEmphasis:c.getOwa().meanWeights(a.indicatorVector.length<=1?1:a.indicatorVector.length)}),a.editable.push(!1)}},a.removeDecisionStrategy=function(){a.decisionStrategies.splice(a.selectedDecisionStrategyIndex,1)},a.getItemStyle=function(b){var c="list-group-item";return a.selectedDecisionStrategyIndex===b&&(c+=" list-group-item-info"),a.listItemsDisabled&&(c+=" disabled"),c},a.setSelectedDecisionStrategy=function(b){a.listItemsDisabled||(a.selectedDecisionStrategyIndex=b,a.currentDecisionStrategy=a.decisionStrategies[a.selectedDecisionStrategyIndex])},a.updateModel=function(){var c,d,e,f,g,h;for(a.indicatorVector=[],c=0;c<a.worldstates.length;c++){f=b.utils.stripIccData([a.worldstates[c]],!1)[0];for(d in f.data)if(f.data.hasOwnProperty(d)){g=f.data[d];for(e in g)g.hasOwnProperty(e)&&"displayName"!==e&&"iconResource"!==e&&(a.indicatorVector?(h=!1,a.indicatorVector.forEach(function(a){a.displayName===g[e].displayName&&(h=!0)}),h||a.indicatorVector.push(g[e])):a.indicatorVector.push(g[e]))}}},a.getButtonStyle=function(){return{color:a.listItemsDisabled?"#CCC":"#fff"}},a.worldstates=a.worldstates||[],a.listItemsDisabled=!(a.worldstates&&a.worldstates.length>0),a.$watch("worldstates",function(){a.updateModel(),a.listItemsDisabled=!(a.worldstates&&a.worldstates.length>0),a.tooltipAdd.title=a.listItemsDisabled?a.tooltipAdd.disabledTitle:a.tooltipAdd.normaltitle,a.listItemsDisabled&&(a.selectedDecisionStrategyIndex=-1)},!0),a.fileAPIAvailable=window.File&&window.FileReader&&window.FileList&&window.Blob?!0:!1,d=function(b){return function(c){var d;try{d=JSON.parse(c.target.result),a.decisionStrategies.push(d),a.$apply()}catch(e){console.error("Could not read Decision Strat File: "+b.name)}}},a.$watch("decisionStrategyFile",function(b,c){var e,f,g;if(!angular.equals(b,c)&&b)for(e=0;e<a.decisionStrategyFile.length;e++){f=a.decisionStrategyFile[e],g=new FileReader,g.onload=d(f);try{g.readAsText(f)}catch(h){console.error("Could not read Decision Strat File: "+f.name)}}})}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.FileContextProviderDirectiveController",["$scope","de.cismet.crisma.ICMM.services.icmm",function(a,b){"use strict";var c,d,e,f,g;a.selectedWorldstates=[],a.worldstates=[],a.criteriaFunctions=[],a.decisionStrategies=[],a.tooltipRename={title:"Rename criteria function"},a.tooltipRenameDone={title:"Done"},a.tooltipDeleteSelection={title:"Done"},a.tooltipDeleteSelection={title:"Remove selection"},a.tooltipAdd={title:"Add Icc Objects from file"},a.editable=[],a.toggleSelection=function(b){var c,d,e;for(c=a.worldstates[b],e=-1,d=0;d<a.selectedWorldstates.length;d++)if(a.selectedWorldstates[d].id===c.id){e=d;break}e>=0?a.selectedWorldstates.splice(e,1):a.selectedWorldstates.push(c)},a.getItemStyle=function(b){var c,d,e,f="list-group-item";for(c=a.worldstates[b],e=-1,d=0;d<a.selectedWorldstates.length;d++)a.selectedWorldstates[d].id===c.id&&(e=d);return e>=0&&(f+=" list-group-item-info"),f},a.fileAPIAvailable=window.File&&window.FileReader&&window.FileList&&window.Blob?!0:!1,a.removeSelectedDummyWS=function(){var b,c,d;for(d=[],b=0;b<a.selectedWorldstates.length;b++)for(c=0;c<a.worldstates.length;c++)angular.equals(a.worldstates[c],a.selectedWorldstates[b])&&d.push(c);for(b=0;b<d.length;b++)a.worldstates.splice(d[b],1);a.selectedWorldstates=[]},c=function(b,c){a.errorFile=b,a.fileLoadError=!0,a.errorMessage=c.message,a.$apply()},d=function(){a.fileLoadError=!1,a.fileLoading=!0},a.fileLoadError=!1,a.fileLoading=!1,e=function(d){return function(e){var f,g;try{f=JSON.parse(e.target.result),g=f.name&&f.iccdata?f:{name:"Nonamed ICC data "+(a.worldstates.length+1),iccdata:f},g.id||(g.id=Math.floor(1e6*Math.random()+1)),b.convertToCorrectIccDataFormat(g),a.worldstates?(a.worldstates.push(g),a.editable.push(!1)):(a.editable.push(!1),a.worldstates=[g]),a.$apply()}catch(h){c(d)}}},f=function(b){return function(c){var d;try{d=JSON.parse(c.target.result),"[object Array]"===Object.prototype.toString.call(d)&&(a.criteriaFunctions=d),a.$apply()}catch(e){console.error("Could not read Criteria Function Config File: "+b.name)}}},g=function(b){return function(c){var d;try{d=JSON.parse(c.target.result),"[object Array]"===Object.prototype.toString.call(d)&&(a.decisionStrategies=d),a.$apply()}catch(e){console.error("Could not read Decision Strategy Config File: "+b.name)}}},a.$watch("iccObjects",function(b,f){var g,h,i;if(!angular.equals(b,f)&&b)for(d(),g=0;g<a.iccObjects.length;g++){h=a.iccObjects[g],i=new FileReader,i.onload=e(h);try{i.readAsText(h)}catch(j){c(h)}}}),a.$watch("cfConfigFile",function(b,c){var e;if(!angular.equals(b,c)&&b){d(),e=a.cfConfigFile[0];var g=new FileReader;g.onload=f(e);try{g.readAsText(e)}catch(h){console.error("Could not read Criteria Function Config File: "+e.name)}}}),a.$watch("dsConfigFile",function(b,c){var e;if(!angular.equals(b,c)&&b){d(),e=a.dsConfigFile[0];var f=new FileReader;f.onload=g(e);try{f.readAsText(e)}catch(h){console.error("Could not read Decision Strategy Config File: "+e.name)}}})}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.IcmmContextProviderDirectiveController",["$scope","de.cismet.collidingNameService.Nodes","de.cismet.crisma.ICMM.Worldstates","de.cismet.crisma.ICMM.services.icmm","eu.crismaproject.worldstateAnalysis.services.CriteriaFunction","eu.crismaproject.worldstateAnalysis.services.DecisionStrategies",function(a,b,c,d,e,f){"use strict";a.activeItem={},a.treeOptions={checkboxClass:"glyphicon glyphicon-unchecked",folderIconClosed:"icon-world.png",folderIconOpen:"icon-world.png",leafIcon:"icon-world.png",imagePath:"bower_components/crisma-worldstate-tree-widget-angular/dist/images/",multiSelection:!0},a.treeSelection=[],a.selectedWorldstates=[],c.query({level:3,fields:"id,name,key,iccdata,actualaccessinfo, actualaccessinfocontenttype, categories",deduplicate:!1},function(b){b.forEach(function(a){a=d.convertToCorrectIccDataFormat(a)}),a.worldstates=b}),a.criteriaFunctions=[],e.query(function(b){b.length>0&&(a.criteriaFunctions=b)}),a.selectedCriteriaFunction=a.criteriaFunctions[0],a.showDsPersistSpinner=!1,a.showDsPersistDone=!1,a.decisionStrategies=[],f.query(function(b){a.decisionStrategies=b||[]}),a.$watchCollection("treeSelection",function(b,e){var f,g,h,i,j,k;if(b!==e)if(a.treeSelection.length>a.selectedWorldstates.length){for(f=a.treeSelection.length-1;f>=0;f++)if(h=a.treeSelection[f],k=!1,a.selectedWorldstates.forEach(function(a){j=h.objectKey,g=parseInt(j.substring(j.lastIndexOf("/")+1,j.length)),parseInt(a.id)===g&&(k=!0)}),!k){j=h.objectKey,g=j.substring(j.lastIndexOf("/")+1,j.length),c.get({level:3,fields:"id,name,key,iccdata,actualaccessinfo, actualaccessinfocontenttype, categories",deduplicate:!1,wsId:g},function(b){a.selectedWorldstates.push(d.convertToCorrectIccDataFormat(b))});break}}else if(a.treeSelection.length<a.selectedWorldstates.length)for(f=0;f<a.selectedWorldstates.length;f++)if(i=a.selectedWorldstates[f],k=!1,a.treeSelection.forEach(function(a){j=a.objectKey,g=parseInt(j.substring(j.lastIndexOf("/")+1,j.length)),parseInt(i.id)===g&&(k=!0)}),!k){a.selectedWorldstates.splice(f,1);break}}),a.treeNodes=b.query(function(){})}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.IndicatorBandDirectiveController",["$scope","$timeout","eu.crismaproject.worldstateAnalysis.services.CriteriaCalculationService",function(a,b,c){"use strict";var d,e;d={lowerBoundary:{criteriaValue:0,indicatorValue:0},upperBoundary:{criteriaValue:100,indicatorValue:0},intervals:[]},e=function(a,b){return a.criteriaValue-b.criteriaValue},a.criteriaFunction||(a.criteriaFunction=d),a.criteriaFunction.lowerBoundary=a.criteriaFunction.lowerBoundary||d.lowerBoundary,a.criteriaFunction.upperBoundary=a.criteriaFunction.upperBoundary||d.upperBoundary,a.criteriaFunction.intervals=a.criteriaFunction.intervals?a.criteriaFunction.intervals.sort(e)||d.intervals.sort(e):d.intervals.sort(e),a.$watch("criteriaFunction",function(){a.criteriaFunction&&(a.criteriaFunction.lowerBoundary=a.criteriaFunction.lowerBoundary||d.lowerBoundary,a.criteriaFunction.upperBoundary=a.criteriaFunction.upperBoundary||d.upperBoundary,a.criteriaFunction.intervals=a.criteriaFunction.intervals?a.criteriaFunction.intervals.sort(e)||d.intervals.sort(e):d.intervals.sort(e))},!0),a.getIntervalColor=function(b){var d,e;switch(e=c.getColor(b,a.criteriaFunction)){case"#B5F4BC":d="color-b";break;case"#FFBA6B":d="color-c";break;case"#FF9F80":d="color-d";break;case"#FFC48C":d="color-e";break;case"#FFDC8A":d="color-f";break;case"#FFF19E":d="color-g";break;case"#EFFAB4":d="color-h";break;case"#D1F2A5":d="color-i"}return d},a.deleteInterval=function(b){var c=a.criteriaFunction.intervals.indexOf(b);a.criteriaFunction.intervals.splice(c,1)},a.updateLowerBoundary=function(b){a.criteriaFunction.lowerBoundary.indicatorValue=b},a.updateUpperBoundary=function(b){a.criteriaFunction.upperBoundary.indicatorValue=b},a.$on("band-item-removed",function(b,c){b.targetScope!==a?a.$broadcast("band-item-removed"):a.deleteInterval(c)}),a.createInterval=function(b,c){var d={criteriaValue:b,indicatorValue:c};a.criteriaFunction.intervals.push(d),a.criteriaFunction.intervals.sort(e),a.$broadcast("band-item-added")},a.getIntervalWidth=function(a,b){var c=0;return b&&(c=b.criteriaValue||0),a&&a.criteriaValue?{width:a.criteriaValue-c+"%"}:{width:100-c+"%"}}}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.IndicatorBandItemDirectiveController",["$scope","$filter","$element","$timeout",function(a,b,c,d){"use strict";a.actualHeightExceeded=!1,a.getElementHeight=function(){return c.height()},a.getElementWidth=function(){return c.width()},a.checkActualHeight=function(){d(function(){var b=a.lowerBoundary||a.upperBoundary?c.children()[0]:c.children()[1];angular.element(b).height()>angular.element(c.parent()).height()?a.actualHeightExceeded=!0:(a.actualHeightExceeded&&d(function(){a.checkActualHeight()}),a.actualHeightExceeded=!1)},500)},a.actualHeightExceeded=!1,a.checkActualHeight(),a.$on("band-item-added",function(){a.checkActualHeight()}),a.$on("band-item-removed",function(){a.checkActualHeight()}),a.getCriteriaSuggestion=function(){var b;return b=!a.interval||a.upperBoundary?100:a.lowerBoundary?0:a.previousInterval?a.previousInterval.criteriaValue+(a.interval.criteriaValue-a.previousInterval.criteriaValue)/2:a.interval.criteriaValue/2},a.$on("tooltip.show.before",function(){a.popOverItem.criteriaValue=a.getCriteriaSuggestion(),a.popOverItem.indicatorValue=a.interval.indicatorValue||0}),a.minWidth=80;var e=a.interval?a.interval.indicatorValue||0:0;a.popOverItem={criteriaValue:a.getCriteriaSuggestion(),indicatorValue:e},a.getPercent=function(){var b=0;if(a.lowerBoundary||a.upperBoundary)return 100;if(a.previousInterval&&(b=a.previousInterval.criteriaValue||0),a.interval&&(a.interval.criteriaValue||0===a.interval.criteriaValue)){if(b>a.interval.criteriaValue)throw new Error("The criteriaValue of the previous interval can not be higher than the criteriaValue of the current Interval");return a.interval.criteriaValue-b}if(b>100)throw new Error("The criteriaValue of the previous interval can not be higher than the criteriaValue of the current Interval");return 100-b},a.intervalWidth=function(){var b=a.getPercent();return{width:b+"%"}},a.getColorClass=function(){return a.lowerBoundary?"color-a":a.upperBoundary?"color-j":a.getColor({interval:a.interval})},a.del=function(b){a.$emit("band-item-removed",b),a.tooltip={title:a.getTooltipTitle(),checked:!1}},a.updateInterval=function(b){a.onIntervalChanged({criteriaValue:a.popOverItem.criteriaValue,indicatorValue:a.popOverItem.indicatorValue}),a.hidePopover(),b.stopPropagation(),d(function(){a.tooltip={title:a.getTooltipTitle(),checked:!1}})},a.getTooltipTitle=function(){var b="";return b+="Criteria: ",b+=a.lowerBoundary?"0%":a.upperBoundary?"100%":(a.previousInterval.criteriaValue||"0")+"% -"+a.interval.criteriaValue+"%",b+="\n Indicator Values: ",b+=a.lowerBoundary?"<= "+(a.interval?a.interval.indicatorValue||0:0):a.upperBoundary?">= "+(a.interval?a.interval.indicatorValue||0:0):(a.previousInterval?a.previousInterval.indicatorValue||0:0)+"- "+a.interval.indicatorValue},a.previousInterval&&a.interval&&(a.tooltip={title:a.getTooltipTitle(),checked:!1})}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.indicatorBarChartDirectiveController",["$scope","de.cismet.crisma.ICMM.Worldstates","$filter",function(a,b,c){"use strict";var d,e;d=this,e=d3.format(".3s"),this.createChartModels=function(){var c,d,e,f,g,h;for(d={},c=0;c<a.worldstates.length;c++){e=b.utils.stripIccData([a.worldstates[c]])[0].data;for(g in e)if(e.hasOwnProperty(g)){f=e[g];for(h in f)f.hasOwnProperty(h)&&"displayName"!==h&&"iconResource"!==h&&(d[h]||(d[h]={key:f[h].displayName,forceY:[0,0],values:[]}),parseInt(f[h].value)>d[h].forceY&&(d[h].forceY[1]=parseInt(f[h].value)),d[h].values.push([a.worldstates[c].name,parseInt(f[h].value)]))}}var i=[];for(e in d)d.hasOwnProperty(e)&&i.push([d[e]]);a.chartModels=i};var f=d3.scale.category20().range();a.colorFunction=function(){return function(a,b){return f[b%f.length]}},a.yAxisTickFormat=function(a){var b=e(a);return b.replace("M","Mio").replace("G","Mrd").replace("T","B")},a.toolTipContentFunction=function(){return function(a,b,d,e){return'<h3 style="font-weight:normal; font-size:18px">'+b+"</h3><p>"+a+": "+c("number")(e.value)+"</p>"}},a.getLegendColor=function(b){return{color:a.colorFunction()(0,b)}},a.$watch("worldstates",function(){a.worldstates&&a.worldstates.length>0&&d.createChartModels()},!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.IndicatorCriteriaAxisChooserDirectiveController",["$scope",function(a){"use strict";var b,c,d;c="true"===a.isXAxis,d={name:c?"Select a x-axis":"Select a y-axis"},b=function(a){var b,c,d,e=[];if(a){var f=a.data;for(b in f)if(f.hasOwnProperty(b)){c=f[b],e.push({name:c.displayName,icon:c.iconResource,isGroup:!0});for(d in c)c.hasOwnProperty(d)&&"displayName"!==d&&"iconResource"!==d&&e.push({name:c[d].displayName,icon:c[d].iconResource,isGroup:!1})}}return e},a.selectedAxis||(a.selectedAxis=d),a.scales=[],a.axisSelected=function(b){a.selectedAxis=a.scales[b]?a.scales[b]:d},a.$watch("iccObject",function(){a.iccObject&&(a.scales=b(a.iccObject))})}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.IndicatorCriteriaTableDirectiveController",["$scope","$filter","de.cismet.crisma.ICMM.Worldstates","ngTableParams","eu.crismaproject.worldstateAnalysis.services.CriteriaCalculationService",function(a,b,c,d,e){"use strict";var f=function(a){var b,c;c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c.sort(),c},g=function(){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(u=c.utils.stripIccData(a.worldstates),a.worldstates&&0!==a.worldstates.length){for(a.rows=[],a.columns=[{title:a.forCriteria?"Level of satisfaction (higher is better)":"Indicators",field:"f1",visible:!0}],k=0,j=u[0].data,n=f(j),l=0;l<n.length;++l)for(h=j[n[l]],a.rows[k++]={f1:{name:h.displayName,icon:h.iconResource}},o=f(h),m=0;m<o.length;++m)p=o[m],"displayName"!==p&&"iconResource"!==p&&(a.rows[k++]={f1:{name:h[p].displayName,icon:h[p].iconResource}});for(i=0;i<u.length;++i)for(g="f"+(i+2),a.columns.push({title:u[i].name,field:g,visible:!0}),j=u[i].data,k=0,n=f(j),l=0;l<n.length;++l)for(h=j[n[l]],a.rows[k++][g]=null,o=f(h),m=0;m<o.length;++m)if(p=o[m],t=a.forCriteria?"% LoS":h[p].unit,"displayName"!==p&&"iconResource"!==p){if(a.forCriteria){for(s=0;s<a.criteriaFunction.criteriaFunctions.length;s++)if(a.criteriaFunction.criteriaFunctions[s].indicator===h[p].displayName){r=a.criteriaFunction.criteriaFunctions[s];break}q=e.calculateCriteria(h[p].value,r)}else q=h[p].value;q=q%1===0?b("number")(q,0):b("number")(q,2),a.rows[k++][g]={name:q+" "+t}}}a.tableParams?a.tableParams.reload():a.tableParams=new d({page:1,count:1e4},{counts:[],total:a.worldstates.length,getData:function(b,c){return a.worldstates.length<=0?null:void b.resolve(a.rows.slice((c.page()-1)*c.count(),c.page()*c.count()))}})};a.tableVisibleSwitch="0",a.isGroupRow=function(a){return null===a.f2},a.getRowStyle=function(b){var c=a.rows[b],d={"font-weight":"bold"};return a.isGroupRow(c)?d:""},a.getCellStyle=function(a){var b={"text-align":"right"};return a>0?b:""},a.$watchCollection("worldstates",function(){if(a.worldstates&&a.worldstates.length>0){if(a.forCriteria&&!a.criteriaFunction)return;g()}}),a.$watch("forCriteria",function(b,c){if(b!==c&&a.worldstates){if(a.forCriteria&&!a.criteriaFunction)return;g()}}),a.$watch("criteriaFunction",function(b,c){b!==c&&a.worldstates&&a.criteriaFunction&&g()},!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.levelOfEmphasisDirectiveController",["$scope","eu.crismaproject.worldstateAnalysis.services.AnalysisService",function(a,b){"use strict";var c,d,e;c=this,d=b.getOwa(),this.updateLseVectors=function(){if(a.indicatorSize>=1){for(c.onlyPositiveLse=[],e=0;e<a.indicatorSize;e++)this.onlyPositiveLse[e]=0===e?1:0;for(c.overEmphPosLse=d.hLSWeights(a.indicatorSize<=1?1:a.indicatorSize),c.neutralLse=d.meanWeights(a.indicatorSize<=1?1:a.indicatorSize),c.overEmphNegLse=d.lLSWeights(a.indicatorSize<=1?1:a.indicatorSize),c.onlyNegativeLse=[],e=0;e<a.indicatorSize;e++)c.onlyNegativeLse[e]=e===a.indicatorSize-1?1:0}},this.updateSatisfactionEmphasis=function(a){var b;switch(parseInt(a)){case-2:b=c.onlyNegativeLse;break;case-1:b=c.overEmphNegLse;break;case 0:b=c.neutralLse;break;case 1:b=c.overEmphPosLse;break;case 2:b=c.onlyPositiveLse}return b},this.satisfactionEmphasisEquals=function(a,b){var c;if(a&&b&&a.length===b.length){for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return!1},this.updateInternalModel=function(a){return c.satisfactionEmphasisEquals(a,this.onlyNegativeLse)?-2:c.satisfactionEmphasisEquals(a,this.overEmphNegLse)?-1:c.satisfactionEmphasisEquals(a,this.neutralLse)?0:c.satisfactionEmphasisEquals(a,this.overEmphPosLse)?1:c.satisfactionEmphasisEquals(a,this.onlyPositiveLse)?2:0},c.updateLseVectors(),a.indicatorSize>=1&&(a.model={lse:a.satisfactionEmphasis?c.updateInternalModel(a.satisfactionEmphasis):0}),a.satisfactionEmphasis=a.satisfactionEmphasis||c.updateSatisfactionEmphasis(0),a.$watch("model",function(b,d){b!==d&&a.indicatorSize>=1&&(a.satisfactionEmphasis=c.updateSatisfactionEmphasis(a.model.lse))},!0),a.$watch("satisfactionEmphasis",function(b,d){b!==d&&a.indicatorSize>=1&&(a.model.lse=c.updateInternalModel(a.satisfactionEmphasis))},!0),a.$watch("indicatorSize",function(){c.updateLseVectors(),a.indicatorSize>=1&&(a.model&&a.model.lse||(a.model={lse:a.satisfactionEmphasis?c.updateInternalModel(a.satisfactionEmphasis):0}),a.satisfactionEmphasis=c.updateSatisfactionEmphasis(a.model.lse))},!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.demoApp.controllers").controller("eu.crismaproject.worldstateAnalysis.demoApp.controllers.MainController",["$scope","$timeout","eu.crismaproject.worldstateAnalysis.services.IcmmPersistanceService","eu.crismaproject.worldstateAnalysis.services.FilesPersistanceService",function(a,b,c,d){"use strict";function e(){return a.$watch("worldstatesIcmm",function(){a.worldstates=a.worldstatesIcmm})}function f(){return a.$watch("worldstatesFiles",function(){a.worldstates=a.worldstatesFiles})}function g(){return a.$watch("refWorldstatesIcmm",function(){a.refWorldstates=a.refWorldstatesIcmm})}function h(){return a.$watch("refWorldstatesFiles",function(){a.refWorldstates=a.refWorldstatesFiles})}function i(){return a.$watch("criteriaFunctionsIcmm",function(){a.criteriaFunctions=a.criteriaFunctionsIcmm})}function j(){return a.$watch("criteriaFunctionsFiles",function(){a.criteriaFunctions=a.criteriaFunctionsFiles})}function k(){return a.$watch("decisionStrategiesIcmm",function(){a.decisionStrategies=a.decisionStrategiesIcmm})}function l(){return a.$watch("decisionStrategiesFiles",function(){a.decisionStrategies=a.decisionStrategiesFiles})}var m;a.forCriteriaTable=!1,a.chartModels=[],m=function(){var b,c;if(a.chartModels=[],a.worldstates&&a.worldstates.length>0)for(b=0;b<a.worldstates.length;b++)c=[],a.worldstates[b]&&c.push(a.worldstates[b]),a.worldstateRef&&(c=c.concat(a.worldstateRef)),a.chartModels.push(c)},a.$watch("worldstateRef",function(a,b){a!==b&&m()}),a.$watchCollection("worldstates",function(b,c){b!==c&&a.worldstates&&m()}),a.updateSelectedCriteriaFunction=function(b){a.selectedCriteriaFunction=a.criteriaFunctions[b]},a.updateSelectedDecisionStrategy=function(b){a.selectedDecisionStrategy=a.decisionStrategies[b]},a.persistCriteriaFunctions=function(){a.showPersistSpinner=!0,a.showPersistDone=!1,b(function(){a.icmmTabVisible?c.persistCriteriaFunctions(a.criteriaFunctions):d.persistCriteriaFunctions(a.criteriaFunctions),a.showPersistSpinner=!1,a.showPersistDone=!0,b(function(){a.showPersistDone=!1},1500)},500)},a.indicatorVector=[],a.showDsPersistSpinner=!1,a.showDsPersistDone=!1,a.persistDecisionStrategies=function(){a.showDsPersistSpinner=!0,a.showDsPersistDone=!1,b(function(){a.icmmTabVisible?c.persistDecisionStrategies(a.decisionStrategies):d.persistDecisionStrategies(a.decisionStrategies),a.showDsPersistSpinner=!1,a.showDsPersistDone=!0,b(function(){a.showDsPersistDone=!1},1500)},500)},a.indicatorVector=[],a.derigsterIcmmWsWatch=e(),a.derigsterRefWsIcmmWatch=g(),a.derigsterCfIcmm=i(),a.derigsterDsIcmm=k(),a.icmmTabVisible=!0,a.switchToIcmmTab=function(){a.icmmTabVisible=!0,a.derigsterFilesWsWatch(),a.derigsterIcmmWsWatch=e(),a.derigsterRefWsFilesWatch(),a.derigsterRefWsIcmmWatch=g(),a.derigsterCfFilesWatch(),a.derigsterCfIcmm=i(),a.derigsterDsFilesWatch(),a.derigsterDsIcmm=k(),a.selectedCriteriaFunction=void 0,a.selectedDecisionStrategy=void 0},a.switchToFilesTab=function(){a.icmmTabVisible=!1,a.derigsterIcmmWsWatch(),a.derigsterFilesWsWatch=f(),a.derigsterRefWsIcmmWatch(),a.derigsterRefWsFilesWatch=h(),a.derigsterCfIcmm(),a.derigsterCfFilesWatch=j(),a.derigsterDsIcmm(),a.derigsterDsFilesWatch=l(),a.selectedCriteriaFunction=void 0,a.selectedDecisionStrategy=void 0}}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.RelationAnalysisChartDirectiveController",["$scope","de.cismet.crisma.ICMM.Worldstates","eu.crismaproject.worldstateAnalysis.services.CriteriaCalculationService",function(a,b,c){"use strict";var d=this;this.createChartData=function(a,b,c,e,f,g){var h,i,j,k,l=[];if(!a||!b||!c)throw"Invalid configuration. Can no determine chart data for (iccData, xAxis, yaxis):"+a+" , "+b+" , "+c;if(!g||e&&f){var m=0;for(h=0;h<a.length;h++){if(i=a[h],!i)throw"Invalid icc object "+i;j=d.getDataValueForAxis(b,i,e,g),k=d.getDataValueForAxis(c,i,f,g),0===m&&(m=j),l.push({key:h+1+". "+a[h].name,values:[{x:j,y:k}]})}return l}},this.getDataValueForAxis=function(a,b,d,e){var f,g,h,i,j;if(!a||!a.name)return null;f=a.name,g=b.data;for(j in g)if(g.hasOwnProperty(j)){h=g[j];for(i in h)if(h.hasOwnProperty(i)&&h[i].displayName===f)return e?c.calculateCriteria(h[i].value,d):h[i].value}return null},a.getXAxisLabel=function(){var b="";return a.xAxis&&a.xAxis.name&&(b=a.xAxis.name),b},a.getYAxisLabel=function(){var b="";return a.yAxis&&a.yAxis.name&&(b=a.yAxis.name),b},a.zScale=d3.scale.linear(),a.yAxisTickFormatFunction=function(){return function(a){return d3.round(a,2)}},a.xAxisTickFormatFunction=function(){return function(a){return d3.round(a,2)}},this.dataChangedWatchCallback=function(){a.worldstates()&&a.worldstates().length>0&&(a.iccData=b.utils.stripIccData(a.worldstates()),a.iccObject=a.iccData[0],a.xAxis&&a.yAxis&&-1===a.xAxis.name.indexOf("Select")&&-1===a.yAxis.name.indexOf("Select")&&(a.chartdata=d.createChartData(a.iccData,a.xAxis,a.yAxis,a.xAxisCriteriaFunction,a.yAxisCriteriaFunction,a.forCriteria)))},this.updateAxisCriteriaFunctions=function(){var b;
for(b=0;b<a.criteriaFunctionSet.criteriaFunctions.length;b++)a.criteriaFunctionSet.criteriaFunctions[b].indicator===a.xAxis.name&&(a.xAxisCriteriaFunction=a.criteriaFunctionSet.criteriaFunctions[b]),a.criteriaFunctionSet.criteriaFunctions[b].indicator===a.yAxis.name&&(a.yAxisCriteriaFunction=a.criteriaFunctionSet.criteriaFunctions[b])},this.axisWatchCallback=function(){a.xAxis&&a.yAxis&&-1===a.xAxis.name.indexOf("Select")&&-1===a.yAxis.name.indexOf("Select")&&(a.criteriaFunctionSet&&d.updateAxisCriteriaFunctions(),a.chartdata=d.createChartData(a.iccData,a.xAxis,a.yAxis,a.xAxisCriteriaFunction,a.yAxisCriteriaFunction,a.forCriteria))},a.$watch("xAxis",this.axisWatchCallback),a.$watch("yAxis",this.axisWatchCallback),a.$watch("forCriteria",this.dataChangedWatchCallback),a.$watch("worldstates()",this.dataChangedWatchCallback,!0),a.$watch("criteriaFunctionSet",this.axisWatchCallback,!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.WorldstateAnalysisWidgetDirectiveController",["$scope","de.cismet.crisma.ICMM.Worldstates","localStorageService","$timeout",function(a,b,c,d){"use strict";var e,f;a.forCriteriaTable=!0,a.chartModels=[],e=function(){var b,c;if(a.chartModels=[],a.worldstates&&a.worldstates.length>0)for(b=0;b<a.worldstates.length;b++)c=[],a.worldstates[b]&&c.push(a.worldstates[b]),a.worldstateRef&&(c=c.concat(a.worldstateRef)),a.chartModels.push(c)},f=function(){var c,d,e,f,g,h,i,j,k;if(k=function(b,c,d){h===b.displayName&&(j=!1),c===d.length-1&&j&&a.indicatorVector.push(i)},a.worldstates&&a.worldstates.length>0)for(g=0;g<a.worldstates.length;g++){e=b.utils.stripIccData([a.worldstates[g]],!1)[0];for(c in e.data)if(e.data.hasOwnProperty(c)){f=e.data[c];for(d in f)f.hasOwnProperty(d)&&"displayName"!==d&&"iconResource"!==d&&(a.indicatorVector.length>0?(h=f[d].displayName,i=f[d],j=!0,a.indicatorVector.forEach(k)):a.indicatorVector.push(f[d]))}}},a.criteriaFunctionSet=c.get("criteriaFunctionSet")||[],a.criteriaFunctionSets=a.criteriaFunctionSet,a.selectedCriteriaFunction=a.criteriaFunctionSet[0],a.persistCriteriaFunctions=function(){a.showPersistSpinner=!0,a.showPersistDone=!1,d(function(){c.add("criteriaFunctionSet",a.criteriaFunctionSets),a.showPersistSpinner=!1,a.showPersistDone=!0,d(function(){a.showPersistDone=!1},1500)},500)},a.decisionStrategies=c.get("decisionStrategies")||[],a.selectedDecisionStrategy=a.decisionStrategies[0],a.persistDecisionStrategies=function(){a.showDsPersistSpinner=!0,a.showDsPersistDone=!1,d(function(){c.add("decisionStrategies",a.decisionStrategies),a.showDsPersistSpinner=!1,a.showDsPersistDone=!0,d(function(){a.showDsPersistDone=!1},1500)},500)},b.query({level:2},function(b){a.allWorldstates=b}),a.$watch("worldstateRef",function(a,b){a!==b&&(e(),f())}),a.$watch("worldstates",function(b,c){b!==c&&a.worldstates&&(e(),f())},!0),a.indicatorVector=[]}]),angular.module("eu.crismaproject.worldstateAnalysis.controllers").controller("eu.crismaproject.worldstateAnalysis.controllers.worldstateRankingTableDirectiveController",["$scope","$filter","ngTableParams","de.cismet.crisma.ICMM.Worldstates","eu.crismaproject.worldstateAnalysis.services.CriteriaCalculationService","eu.crismaproject.worldstateAnalysis.services.AnalysisService","ngDialog",function(a,b,c,d,e,f,g){"use strict";var h;h=this,h.getOrderedProperties=function(a){var b,c;c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c.sort(),c},h.extractIndicators=function(a){var b,c,e,f,g;if(g=[],a){e=d.utils.stripIccData([a],!1)[0];for(b in e.data)if(e.data.hasOwnProperty(b)){f=e.data[b];for(c in f)f.hasOwnProperty(c)&&"displayName"!==c&&"iconResource"!==c&&g.push(f[c])}}return g},h.getCriteriaVectorForWorldstate=function(a,b){var c,d,f;if(c=h.extractIndicators(a),d=[],c&&c.length===b.criteriaFunctions.length)for(f=0;f<c.length;f++)b.criteriaFunctions.forEach(function(a){a.indicator===c[f].displayName&&d.push({indicator:c[f],criteria:e.calculateCriteria(c[f].value,a)/100})});return d},h.getCritAndWeightVector=function(a,b){var c,d,e;for(c={},c.criteria=[],c.weights=[],d=0;d<a.criteriaEmphases.length;d++)e=a.criteriaEmphases[d],b.forEach(function(a){a.indicator.displayName===e.indicator.displayName&&(c.criteria.push(a.criteria),c.weights.push(e.criteriaEmphasis/100))});return c},h.createTableItem=function(c){var d,e,g,i,j,k;if(a.criteriaFunction&&a.decisionStrategy?(e=h.getCriteriaVectorForWorldstate(c,a.criteriaFunction),g=h.getCritAndWeightVector(a.decisionStrategy,e),i=f.getOwa().aggregateLS(g.criteria,a.decisionStrategy.satisfactionEmphasis,g.weights)):i=0,j={rank:d,worldstate:c.name,ws:c,score:b("number")(100*i,2)+" %",rawScore:i},a.criteriaFunction&&a.decisionStrategy)for(d=0;d<e.length;d++)k=e[d],j[k.indicator.displayName]={indicator:b("number")(k.indicator.value)+" "+k.indicator.unit,los:b("number")(k.criteria,2)+" % LoS"};return j},h.addMissingColumns=function(b){var c,d,e,f=!1;for(e=h.extractIndicators(b),c=0;c<e.length;c++)d=e[c],a.columns.forEach(function(a){a.field===d.displayName&&(f=!0)}),f||a.columns.push({title:d.displayName+" ("+(a.columns.length-2)+")",field:d.displayName})},h.insertAtCorrectTablePosition=function(b,c){var d,e,f,g,h;if(h=c.rawScore,b&&0!==b.length){for(e=-1,f=!1,d=0;d<b.length;d++)g=b[d],f&&g.rank++,g.rawScore<=h&&-1===e&&(c.rank=d+1,g.rank++,f=!0,e=d);-1===e?(c.rank=a.tableData.length+1,b.push(c)):b.splice(e,0,c)}else c.rank=1,b.push(c)},h.addWorldstateToTableData=function(b){var c;h.addMissingColumns(b),c=h.createTableItem(b),a.tableData||(a.tableData=[]),h.insertAtCorrectTablePosition(a.tableData,c)},h.removeWorldstateFromTableData=function(b){var c,d=-1;if(a.tableData.forEach(function(a,c){angular.equals(a.ws,b)&&-1===d&&(d=c)}),-1!==d)for(a.tableData.splice(d,1),c=d;c<a.tableData.length;c++)a.tableData[c].rank--;else console.error("Could not remove worldstate "+b+" from ranking table")},h.updateWorldstateTableData=function(b){var c,d,e;for(e=h.createTableItem(b),d=0;d<a.tableData.length;d++)if(c=a.tableData[d],c.ws.id===b.id){h.removeWorldstateFromTableData(c.ws);break}h.insertAtCorrectTablePosition(a.tableData,e)},h.refreshTable=function(){a.tableParams?(a.tableParams.reload(),a.tableParams.settings().$scope=a):(a.tableParams=new c({page:1,count:1e3,sorting:{name:"asc"}},{counts:[],total:1,getData:function(c,d){var e;e=d.sorting()?b("orderBy")(a.tableData,d.orderBy()):a.tableData,d.total(e.length),c.resolve(a.tableData.slice((d.page()-1)*d.count(),d.page()*d.count()))}}),a.tableParams.settings().$scope=a)},h.addMissingWoldstatesToTable=function(b){var c,d,e;for(c=a.worldstates.length-1;c>=0;c--)d=a.worldstates[c],e=!1,b&&(b.forEach(function(a){parseInt(a.id)===parseInt(d.id)&&(e=!0)}),e||h.addWorldstateToTableData(d))},h.removeMissingWorldstatesFromTable=function(b){var c,d,e;for(c=b.length-1;c>=0;c--)d=b[c],e=!1,a.worldstates.forEach(function(a){parseInt(a.id)===parseInt(d.id)&&(e=!0)}),e||h.removeWorldstateFromTableData(d)},h.worldstateWatchCallback=function(b,c){b!==c&&c&&a.criteriaFunction&&a.decisionStrategy&&a.worldstates&&a.worldstates.length>0&&(h.addMissingWoldstatesToTable(c),h.removeMissingWorldstatesFromTable(c),h.refreshTable())},h.decisionStrategyWatchCallback=function(b,c){var d,e,f=0,g=[];if(!angular.equals(b,c)&&a.worldstates&&a.worldstates.length>0&&a.criteriaFunction&&a.decisionStrategy){if(a.tableData){for(f=0;f<a.tableData.length;f++)d=a.tableData[f].ws,e=h.createTableItem(d),h.insertAtCorrectTablePosition(g,e);a.tableData=g}else for(f=0;f<a.worldstates.length;f++)h.addWorldstateToTableData(a.worldstates[f]);h.refreshTable()}},a.clickToOpen=function(b){a.ws=a.tableData[b].ws,g.open({template:"templates/criteriaRadarPopupTemplate.html",scope:a,className:"ngdialog-theme-default ngdialog-theme-custom ngdialog-theme-width"})},a.columns=[{title:"Rank",field:"rank"},{title:"Worldstate",field:"worldstate"},{title:"Score",field:"score"}],a.tableVisibleSwitch="0",a.$watch("worldstates",h.worldstateWatchCallback,!0),a.$watch("decisionStrategy",h.decisionStrategyWatchCallback,!0),a.$watch("criteriaFunction",h.decisionStrategyWatchCallback,!0)}]),angular.module("eu.crismaproject.worldstateAnalysis.directives",["eu.crismaproject.worldstateAnalysis.controllers","ngTable","de.cismet.crisma.ICMM.Worldstates","mgcrea.ngStrap.popover"]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("knob",function(){"use strict";return{restrict:"EACM",template:function(){return'<input ng-model="knobData">'},replace:!0,scope:{knobData:"=",knobOptions:"="},link:function(a,b){var c=function(){var c,d;d=a.knobOptions||{max:100,width:100,height:100,displayInput:!1,angleOffset:-125,angleArc:250},d.release=function(b){a.knobData=b,a.$apply()},c=b,c.val(a.knobData),c.knob(d),b.find("div").css("display","block").css("margin","0 auto")};a.$watch("knobData",function(){c()},!0),a.$watch("knobOptions",function(){c()})}}}),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("criteriaEmphasis",[function(){"use strict";var a;return a={criteriaEmphases:"=",indicatorMap:"="},{scope:a,restrict:"E",templateUrl:"templates/criteriaEmphasesTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.criteriaEmphasesController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("criteriaFunctionManager",[function(){"use strict";var a;return a={worldstates:"=",criteriaFunctionSet:"=criteriaFunctions"},{scope:a,restrict:"E",templateUrl:"templates/criteriaFunctionManagerTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.CriteriaFunctionManagerDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("criteriaRadar",["de.cismet.crisma.ICMM.Worldstates",function(a){"use strict";var b,c,d,e;return b={localModel:"&worldstates",criteriaFunction:"=",showLegend:"=",showAxisText:"=",useNumbers:"="},e=function(a){d3.select(a[0]).selectAll("circle").select("title").text(function(a){return a.tooltip+": "+Math.max(a.value,0)})},d=function(a,b,c){var d,e,f,g,h,i,j,k,l;d=d3.scale.category10(),e=d3.select(a[0]).append("div").append("svg").attr("width",b.w).attr("height",5),f=e.append("g").attr("class","legend").attr("height",5).attr("width",50),g=f.selectAll("rect").data(c).enter().append("rect").attr("y",15).attr("x",0).attr("width",10).attr("height",10).style("fill",function(a,b){return d(b)}),i=f.selectAll("text").data(c).enter().append("text").attr("y",24).attr("x",0).attr("font-size","11px").attr("fill","#737373").text(function(a){return a}),h=[],j=[],k=0,l=0,i.attr("transform",function(a,c){var d,e,f,g,i;return d=d3.select(this).node().getBBox().width,e=j.reduce(function(a,b){return a+b},0),j.push(d),h.push(d),f=15*(c-k+1),g=20*(c-k),i=e+f+g,i+d>b.w&&(l+=20,k=c,j=[d],i=15),"translate("+i+","+l+")"}),l=0,k=0,g.attr("transform",function(a,c){var d,e,f,g;return d=h.reduce(function(a,b,d){return c>d&&d>=k?a+b:a},0),e=15*(c-k),f=20*(c-k),g=d+e+f,g+h[c]+15>b.w&&(l+=20,k=c,g=0),"translate("+g+","+l+")"}),e.attr("height",l+50),f.attr("height",l+50),f.attr("transform",function(){var a,c;return a=d3.select(this).node().getBBox().width,c=(b.w-a)/2,c=0>c?0:c,"translate("+c+",0)"})},c=function(b,c){var f,g,h;h=function(){var h,i;if(c.removeData(),c.empty(),b.criteriaFunction&&b.localModel()&&b.localModel().length>0){h=a.utils.stripIccData(b.localModel(),!1),i=b.convertToChartDataStructure(h),b.chartData=i[0],b.legendItems=i[1];var j=d3.select(c[0]).append("div").attr("style","display:block;margin: 0 auto;").node();f.w=g=c.width?c.width():200,f.h=g=c.width?c.width():200,RadarChart.draw(j,b.chartData,f),b.showLegend&&d(c,f,b.legendItems),b.useNumbers&&e(c,f,b.legendItems)}},g=c.width?c.width():200,f={w:g,h:g,maxValue:100,levels:4,axisText:angular.isDefined(b.showAxisText)&&b.showAxisText?!0:!1,showTooltip:b.useNumbers},b.$watchCollection("localModel()",h),b.$watch("criteriaFunction",h,!0)},{scope:b,restrict:"AE",link:c,controller:"eu.crismaproject.worldstateAnalysis.controllers.CriteriaRadarChartDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("decisionStrategy",[function(){"use strict";var a;return a={worldstates:"=",decisionStrategy:"="},{scope:a,restrict:"E",templateUrl:"templates/decisionStrategyTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.DecisionStrategyDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("decisionStrategyManager",[function(){"use strict";var a;return a={worldstates:"=",decisionStrategies:"="},{scope:a,restrict:"E",templateUrl:"templates/decisionStrategyManagerTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.decisionStrategyManagerDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("fileContextProvider",[function(){"use strict";var a;return a={worldstates:"=",selectedWorldstates:"=",decisionStrategies:"=",criteriaFunctions:"="},{scope:a,restrict:"E",templateUrl:"templates/fileContextProviderTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.FileContextProviderDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("fileInput",["$parse",function(a){"use strict";return{restrict:"A",link:function(b,c,d){c.bind("change",function(){a(d.fileInput).assign(b,c[0].files),b.$apply()})}}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("icmmContextProvider",[function(){"use strict";var a;return a={worldstates:"=",selectedWorldstates:"=",decisionStrategies:"=",criteriaFunctions:"="},{scope:a,restrict:"E",templateUrl:"templates/icmmContextProviderTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.IcmmContextProviderDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("indicatorBand",[function(){"use strict";var a;return a={criteriaFunction:"=?"},{scope:a,restrict:"E",templateUrl:"templates/indicatorBandTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.IndicatorBandDirectiveController"}}]).directive("indicatorBandItem",["$popover",function(a){"use strict";var b;return b={interval:"=",previousInterval:"=",first:"=",last:"=",lowerBoundary:"@",upperBoundary:"@",onIntervalChanged:"&",getColor:"&"},{scope:b,restrict:"E",templateUrl:"templates/indicatorBandItemTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.IndicatorBandItemDirectiveController",replace:!0,link:function(b,c,d){var e=a(c.find("#popover-target"),{scope:b,title:d.title||"Create a new interval",template:"templates/indicatorBandPopoverTemplate.html",contentTemplate:"templates/indicatorBandPopoverContentTemplate.html",placement:"bottom",trigger:"manual"});b.togglePopover=function(){e.$promise.then(e.toggle)},b.hidePopover=function(){e.$promise.then(e.hide)}}}}]).directive().directive("gnumber",["$filter",function(a){"use strict";return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(a){var b;return a.match(/^[\d.,]*$/)?(b=parseFloat(a.replace(/,/g,"")),isNaN(b)?void e.$setValidity("gnumber",!1):(e.$setValidity("gnumber",!0),b)):void e.$setValidity("gnumber",!1)}),e.$formatters.unshift(function(b){return a("number")(b)})}}}]).directive("gpercent",["$filter",function(a){"use strict";return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(a){var b;return a.match(/^[\d.,]*$/)?(b=parseFloat(a.replace(/,/g,"")),!isNaN(b)&&b>=0&&100>=b?(e.$setValidity("gpercent",!0),b):void e.$setValidity("gpercent",!1)):void e.$setValidity("gpercent",!1)}),e.$formatters.unshift(function(b){return a("number")(b)})}}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("indicatorBarCharts",[function(){"use strict";var a;return a={worldstates:"="},{scope:a,restrict:"E",templateUrl:"templates/indicatorBarChartTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.indicatorBarChartDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("indicatorCriteriaAxisChooser",[function(){"use strict";var a;return a={iccObject:"=",isXAxis:"@",selectedAxis:"="},{scope:a,restrict:"E",templateUrl:"templates/indicatorCriteriaAxisChooserTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.IndicatorCriteriaAxisChooserDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("indicatorCriteriaTable",[function(){"use strict";var a;return a={worldstates:"=",forCriteria:"=",criteriaFunction:"=",detailIcons:"@"},{scope:a,restrict:"E",templateUrl:"templates/indicatorCriteriaTableTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.IndicatorCriteriaTableDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("levelOfEmphasis",[function(){"use strict";var a;return a={satisfactionEmphasis:"=",indicatorSize:"=",expertMode:"="},{scope:a,restrict:"E",templateUrl:"templates/levelOfEmphasisTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.levelOfEmphasisDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("relationAnalysisChart",["de.cismet.crisma.ICMM.Worldstates",function(){"use strict";var a;return a={worldstates:"&",chartHeight:"@height",forCriteria:"=",criteriaFunctionSet:"=criteriaFunction"},{scope:a,restrict:"E",templateUrl:"templates/relationAnalysisChartTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.RelationAnalysisChartDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("worldstateAnalysisWidget",[function(){"use strict";var a;return a={worldstates:"=",criteriaFunctionSets:"=",selectedCriteriaFunction:"=",decisionStrategies:"=",selectedDecisionStrategy:"="},{scope:a,restrict:"E",templateUrl:"templates/worldstateAnalysisWidgetTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.WorldstateAnalysisWidgetDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").directive("worldstateRankingTable",[function(){"use strict";var a;return a={worldstates:"=",criteriaFunction:"=",decisionStrategy:"=",showIndicators:"=",showRadarChart:"="},{scope:a,restrict:"E",templateUrl:"templates/worldstateRankingTableTemplate.html",controller:"eu.crismaproject.worldstateAnalysis.controllers.worldstateRankingTableDirectiveController"}}]),angular.module("eu.crismaproject.worldstateAnalysis.services",[]),angular.module("eu.crismaproject.worldstateAnalysis.services").factory("eu.crismaproject.worldstateAnalysis.services.AnalysisService",[function(){"use strict";var a;return a=function(){var b,c,d,e,f,g,h;return d=1e-7,f=1e6,h=this,g={},e=function(a,b,c){return Math.abs(a-b)<c},c=function(a){var b;for(b=0;b<a.length;++b)if(a[b]<0||a[b]>1)throw"arg value not within range [0, 1]: arg["+b+"]="+a[b]},b=function(a){var b,f;for(c(a),f=0,b=0;b<a.length;++b)f+=a[b];if(!e(f,1,d))throw"sum of vector is not 1: "+f},g.orness=function(a){var c,d,e;for(b(a),d=a.length,e=0,c=0;c<a.length;++c)e+=(d-(c+1))*a[c];return e*=1/(d-1)},g.dispersion=function(a){var c,d;for(b(a),d=0,c=0;c<a.length;++c)0!==a[c]&&(d+=a[c]*Math.log(a[c]));return d*=-1},g.lLSWeights=function(a){var c,d,e;for(d=0,c=1;a>=c;++c)d+=Math.pow(c,Math.E);for(e=[],c=1;a>=c;++c)e[c-1]=Math.pow(c,Math.E)/d;return b(e),e},g.hLSWeights=function(b){return a.lLSWeights(b).reverse()},g.meanWeights=function(b){var c,f,g,h;for(g=1/b,h=[],c=0;b>c;++c)h[c]=g;if(f=a.dispersion(h),!e(f,Math.log(b),d))throw"rounding error: [dispersion="+f+"|log="+Math.log(b)+"]";return h},g.orderedArgs=function(a){return a.slice(0).sort().reverse()},g.aggregateLS=function(d,e,f){var g,h,i,j,k,l,m,n,o,p;if(b(e),c(d),d.length!==e.length)throw"criteria and weights must have the same amount of items";if(f){if(c(f),d.length!==f.length)throw"criteria and importance must have the same amount of items";for(g=[],o=a.orness(e),k=1-o,h=0;h<f.length;++h)l=f[h],p=d[h],m=Math.max(l,k),n=Math.max(l,o),j=m*Math.pow(p,n),g[h]=j}else g=d;for(i=a.orderedArgs(g),j=0,h=0;h<i.length;++h)j+=i[h]*e[h];return j},g}(),{getOwa:function(){return a}}}]),angular.module("eu.crismaproject.worldstateAnalysis.services").factory("eu.crismaproject.worldstateAnalysis.services.CriteriaCalculationService",[function(){"use strict";var a,b,c,d;return b=function(a,b,c){var d,e,f,g,h;return d=Math.max(b.indicatorValue,c.indicatorValue),e=Math.min(b.indicatorValue,c.indicatorValue),f=b.criteriaValue,g=c.criteriaValue,h=(d-a)/(d-e),g+(f-g)*h},a=function(a,c){var d,e,f,g=[];if(!(c.lowerBoundary&&c.upperBoundary&&c.intervals))throw new Error("CriteriaFunction is not valid");if(g.push(c.lowerBoundary),g=g.concat(c.intervals),g.push(c.upperBoundary),c.lowerBoundary.indicatorValue>c.upperBoundary.indicatorValue&&g.reverse(),a<=g[0].indicatorValue)return g[0].criteriaValue;if(a>=g[g.length-1].indicatorValue)return g[g.length-1].criteriaValue;for(d=1;d<g.length;d++)if(e=g[d-1],f=g[d],a>=e.indicatorValue&&a<=f.indicatorValue)return b(a,e,f);return b(a,f,c.upperBoundary)},d=function(a,b){var d,e,f=null;if(0===a)return"#FF6543";if(100===a)return"#B5F4BC";if(b.intervals)for(d=0;d<b.intervals.length;d++)if(e=b.intervals[d],a<e.criteriaValue)return c(e,b);return c(f,b)},c=function(a,b){var c,d,e,f=b.intervals.length,g=-1;if(a)for(d=0;f>d;d++)c=b.intervals[d],c.criteriaValue===a.criteriaValue&&(g=d);return e=0===f?"#FFC48C":1===f?0===g?"#FF9F80":"#FFF19E":2===f?0===g?"#FFBA6B":1===g?"#FFDC8A":"#EFFAB4":3===f?0===g?"#FFBA6B":1===g?"#FFC48C":2===g?"#FFDC8A":"#EFFAB4":4===f?0===g?"#FFBA6B":1===g?"#FF9F80":2===g?"#FFDC8A":3===g?"#FFF19E":"#EFFAB4":5===f?0===g?"#FFBA6B":1===g?"#FF9F80":2===g?"#FFDC8A":3===g?"#FFF19E":4===g?"#EFFAB4":"#D1F2A5":0===g?"#FFBA6B":1===g?"#FF9F80":2===g?"#FFC48C":3===g?"#FFDC8A":4===g?"#FFF19E":5===g?"#EFFAB4":"#D1F2A5"},{calculateCriteria:a,getColor:c,getColorForCriteria:d}}]),angular.module("eu.crismaproject.worldstateAnalysis.services").factory("eu.crismaproject.worldstateAnalysis.services.FilesPersistanceService",[function(){"use strict";function a(a){var b;b=new Blob([a],{type:"text/plain"}),window.open(window.URL.createObjectURL(b))}var b,c;return b=function(b){a(angular.toJson(b))},c=function(b){a(angular.toJson(b))},{persistCriteriaFunctions:b,persistDecisionStrategies:c}}]),angular.module("eu.crismaproject.worldstateAnalysis.services").factory("eu.crismaproject.worldstateAnalysis.services.CriteriaFunction",["$resource","CRISMA_ICMM_API","CRISMA_DOMAIN","de.cismet.crisma.ICMM.services.icmm",function(a,b,c,d){"use strict";var e,f;return f=function(a){var b;return a?(b=JSON.parse(a),JSON.parse(b.criteriaFunctions)):null},e=a(b+"/"+c+".criteriafunctions/1",{cfId:"@id",deduplicate:!1,omitNullValues:"false"},{get:{method:"GET",transformResponse:f},query:{isArray:!0,method:"GET",params:{level:"1",omitNullValues:"true"},transformResponse:f},update:{method:"PUT",transformRequest:function(a){var b,c;return c={$self:"/CRISMA.criteriafunctions/1",id:1,criteriaFunctions:angular.toJson(a)},b=JSON.stringify(c,function(a,b){return"$"===a.substring(0,1)&&"$self"!==a&&"$ref"!==a?void 0:b})}}}),e.getId=function(){return d.getNextId(b+"/"+c,".criteriafunctions")},e}]),angular.module("eu.crismaproject.worldstateAnalysis.services").factory("eu.crismaproject.worldstateAnalysis.services.DecisionStrategies",["$resource","CRISMA_ICMM_API","CRISMA_DOMAIN","de.cismet.crisma.ICMM.services.icmm",function(a,b,c,d){"use strict";var e,f;return f=function(a){var b;return a?(b=JSON.parse(a),JSON.parse(b.decisionStrategies)):null},e=a(b+"/"+c+".decisionstrategies/1",{dsId:"@id",deduplicate:!1,omitNullValues:"false"},{query:{method:"GET",isArray:!0,params:{level:"1",omitNullValues:"true"},transformResponse:f},update:{method:"PUT",transformRequest:function(a){var b,c;return c={$self:"/CRISMA.decisionstrategies/1",id:1,decisionStrategies:angular.toJson(a)},b=JSON.stringify(c,function(a,b){return"$"===a.substring(0,1)&&"$self"!==a&&"$ref"!==a?void 0:b})}}}),e.getId=function(){return d.getNextId(b+"/"+c,".decisionstrategies")},e}]),angular.module("eu.crismaproject.worldstateAnalysis.services").factory("eu.crismaproject.worldstateAnalysis.services.IcmmPersistanceService",["eu.crismaproject.worldstateAnalysis.services.CriteriaFunction","eu.crismaproject.worldstateAnalysis.services.DecisionStrategies",function(a,b){"use strict";var c,d;return c=function(b){a.update(b)},d=function(a){b.update(a)},{persistCriteriaFunctions:c,persistDecisionStrategies:d}}]),angular.module("eu.crismaproject.worldstateAnalysis.directives").run(["$templateCache",function(a){"use strict";a.put("templates/criteriaEmphasesTemplate.html",'<div class="panel panel-default"><div class=panel-heading style="white-space: nowrap;\n         overflow: hidden;\n         text-overflow: ellipsis">Criteria Emphasis</div><div class=panel-body><div class=row><div class="col-lg-2 col-md-2 col-sm-2 col-xs-4" style="margin-bottom: 20px" ng-repeat="item in critEmphInternal"><div class=row><div style="display:block;margin:0 auto;width:100px"><knob knob-data=item.criteriaEmphasis knob-max=knobMax knob-options=knobOptions></knob></div></div><div class=row><div style="display:block;margin:0 auto;width:100px;text-align: center"><span>{{item.indicator.displayName}}</span></div></div></div></div></div></div>'),a.put("templates/criteriaFunctionManagerTemplate.html",'<div class=col-lg-12><div class=row><div class=col-lg-3><div class=row><div class=list-group><span ng-show=fileAPIAvailable ng-style=getButtonStyle() style="margin-bottom: -30px; z-index: 50; margin-left: 225px; font-size: 14px" class="glyphicon glyphicon-upload btn-file"><input type=file ng-disabled=listItemsDisabled file-input=criteriaFunctionFile multiple></span> <a class="list-group-item active">Criteria Functions <i data-placement=top data-type=info data-delay=500 data-container=body data-animation=am-fade-and-scale bs-tooltip=tooltipAdd.title ng-style=getButtonStyle() ng-click=addCriteriaFunction() class="pull-right glyphicon glyphicon-plus-sign"></i></a> <a ng-click=setSelectedCriteriaFunction($index) class=list-group-item ng-class=getListItemClass($index) ng-repeat="cf in criteriaFunctionSet"><span ng-hide=editable[$index]>{{cf.name}}</span> <input style=color:black ng-hide=!editable[$index] ng-model=cf.name><div class=pull-right ng-hide="$index !== selectedCriteriaFunctionIndex"><i ng-hide="listItemsDisabled || editable[$index]" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipRename.title ng-click="editable[$index] = true" style="margin-right: 10px" class="glyphicon glyphicon-pencil"></i> <i ng-hide="listItemsDisabled || !editable[$index]" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipRenameDone.title ng-click="editable[$index] = false" style="margin-right: 10px" class="glyphicon glyphicon-ok"></i>  <i data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale bs-tooltip=tooltipSave.title data-container=body ng-hide=listItemsDisabled ng-click=removeCriteriaFunction() class="glyphicon glyphicon-minus-sign"></i></div></a></div></div></div><div class=col-lg-9 style="margin-top: 20px" ng-if=listItemsDisabled><div class=row ng-if=listItemsDisabled><div class=col-lg-12><div class="alert alert-warning" role=alert><b>Warning:</b> No worldstates are selected</div></div></div></div><div class=col-lg-9 style="margin-top: 20px" ng-if="selectedCriteriaFunctionIndex >= 0 && criteriaFunctionSet[selectedCriteriaFunctionIndex]"><div class=row ng-if=!listItemsDisabled ng-repeat="indicator in indicators"><div class=col-lg-12><div class=row><div class="col-lg-12 vCenter"><img ng-src={{indicator.iconResource}} style="margin-right:5px;margin-bottom: 5px"><label>{{indicator.displayName}}</label></div></div><div class=row><div class=col-lg-12><indicator-band criteria-function=criteriaFunctionSet[selectedCriteriaFunctionIndex].criteriaFunctions[$index]></indicator-band></div></div></div></div></div></div></div>'),a.put("templates/criteriaRadarPopupTemplate.html",'<div class=ngdialog-message style="width:500px;min-width: 500px" criteria-radar worldstates=[ws] show-legend=false show-axis-text=true use-numbers=false criteria-function=criteriaFunction>></div>'),a.put("templates/decisionStrategyManagerTemplate.html",'<div class=col-lg-12><div class=row><div class=col-lg-3><div class=row><div class=list-group><span ng-show=fileAPIAvailable ng-style=getButtonStyle() style="margin-bottom: -30px; z-index: 50; margin-left: 225px; font-size: 14px" class="glyphicon glyphicon-upload btn-file"><input ng-disabled=listItemsDisabled type=file file-input=decisionStrategyFile multiple></span> <a class="list-group-item active">Decision Strategies <i data-placement=top data-type=info data-delay=500 data-container=body data-animation=am-fade-and-scale bs-tooltip=tooltipAdd.title ng-style=getButtonStyle() ng-click=addDecisionStrategy() class="pull-right glyphicon glyphicon-plus-sign"></i></a> <a ng-click=setSelectedDecisionStrategy($index) ng-class=getItemStyle($index) ng-repeat="cf in decisionStrategies"><span ng-hide=editable[$index]>{{cf.name}}</span> <input style=color:black ng-hide=!editable[$index] ng-model=cf.name><div class=pull-right ng-hide="$index !== selectedDecisionStrategyIndex"><i ng-hide="listItemsDisabled || editable[$index]" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipRename.title ng-click="editable[$index] = true" style="margin-right: 10px" class="glyphicon glyphicon-pencil"></i> <i ng-hide="listItemDisabled || !editable[$index]" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipRenameDone.title ng-click="editable[$index] = false" style="margin-right: 10px" class="glyphicon glyphicon-ok"></i> <i data-placement=top ng-hide=listItemsDisabled data-type=info data-delay=500 data-animation=am-fade-and-scale bs-tooltip=tooltipSave.title data-container=body ng-click=removeDecisionStrategy() class="glyphicon glyphicon-minus-sign"></i></div></a></div></div></div><div class=col-lg-9 ng-if=listItemsDisabled style="margin-top: 20px"><div class=row><div class=col-lg-12><div class="alert alert-warning" role=alert><b>Warning:</b> No worldstates are selected</div></div></div></div><div class=col-lg-9 style="margin-top: 20px" ng-if="!listItemsDisabled && selectedDecisionStrategyIndex >= 0 && decisionStrategies[selectedDecisionStrategyIndex]"><decision-strategy worldstates=worldstates decision-strategy=currentDecisionStrategy></decision-strategy></div></div></div>'),a.put("templates/decisionStrategyTemplate.html","<div><div class=col-lg-3><level-of-emphasis satisfaction-emphasis=decisionStrategy.satisfactionEmphasis indicator-size=indicatorSize></level-of-emphasis></div><div class=col-lg-9><div class=row><criteria-emphasis indicator-map=indicatorMap criteria-emphases=decisionStrategy.criteriaEmphases></criteria-emphasis></div></div></div>"),a.put("templates/fileContextProviderTemplate.html",'<div class=row><div ng-show=!fileAPIAvailable class=col-lg-12><div class="alert alert-danger">HTML 5 File APi is not available in your Browser. Please provide a polyfill or use a Browser that supports this. see also http://caniuse.com/#search=file%20api</div></div><div ng-show=fileAPIAvailable class=col-lg-12><div class=row><div class=col-lg-12><div class=panel-group role=tablist><div class="panel panel-default"><div class=panel-heading role=tab id=collapseListGroupHeading1><h4 class=panel-title><a class=collapsed data-toggle=collapse href=#collapseListGroup1 aria-expanded=false aria-controls=collapseListGroup1>Available Icc Objects</a> <span style="font-size: 14px" class="pull-right glyphicon glyphicon-plus-sign btn-file"><span data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipAdd.title></span> <input type=file file-input=iccObjects multiple></span> <span style="margin-right:5px; font-size: 14px" class="pull-right glyphicon glyphicon-minus-sign" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipDeleteSelection.title ng-click=removeSelectedDummyWS()></span></h4></div><div id=collapseListGroup1 class="panel-collapse collapse" role=tabpanel aria-labelledby=collapseListGroupHeading1 aria-expanded=false style="height: 0px"><div class=list-group style="margin-bottom: 0px"><a ng-click=toggleSelection($index) ng-class=getItemStyle($index) class=list-group-item ng-repeat="ws in worldstates"><span ng-hide=editable[$index] style="width: 90%;\n                                          overflow: hidden;\n                                          text-overflow: ellipsis; \n                                          white-space: nowrap;\n                                          display:inline-block">{{ws.name}}</span> <input style="width: 90%; color:black" ng-hide=!editable[$index] ng-model=ws.name><div class=pull-right><i ng-hide="listItemsDisabled || editable[$index]" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipRename.title ng-click="editable[$index] = true" style="margin-right: 10px" class="glyphicon glyphicon-pencil"></i> <i ng-hide="listItemDisabled || !editable[$index]" data-placement=top data-type=info data-delay=500 data-animation=am-fade-and-scale data-container=body bs-tooltip=tooltipRenameDone.title ng-click="editable[$index] = false" style="margin-right: 10px" class="glyphicon glyphicon-ok"></i></div></a></div></div></div></div></div></div><div ng-show=fileLoading class=row><div class=col-lg-12></div></div><div ng-show=fileLoadError class=row><div class=col-lg-12><div class="alert alert-danger">Something went wrong loading file: {{errorFile.name}}</div></div></div><div class=row><div class=col-lg-12><label>Criteria Function Set File</label><input type=file file-input=cfConfigFile></div></div><div class=row><div class=col-lg-12><label>Decision Strategy Set File</label><input type=file file-input=dsConfigFile></div></div></div></div>'),a.put("templates/icmmContextProviderTemplate.html","<div class=row><div class=col-lg-12><catalogue-tree options=treeOptions nodes=treeNodes selection=treeSelection active-node=activeItem></catalogue-tree></div></div>"),a.put("templates/indicatorBandItemTemplate.html",'<div id=popover-parent class="progress-bar table-display" aria-valuemin=0 aria-valuemax=100 aria-valunow={{getPercent()}} ng-style=intervalWidth() ng-class=getColorClass() ng-click=togglePopover($event) style="cursor: pointer"><div class="closeIcon vCenter" ng-if="!lowerBoundary && !upperBoundary"><i ng-click="del(previousInterval);\n                $event.stopPropagation()" ng-hide=first class="glyphicon glyphicon-remove"></i></div><div id=popover-target class=vCenter style=width:100%><div ng-hide=actualHeightExceeded class=progress-labels style=width:100%><span ng-if=lowerBoundary>0%</span> <span ng-if=upperBoundary>100%</span> <span ng-if="!lowerBoundary && !upperBoundary">{{previousInterval.criteriaValue||\'0\' | number}}% - {{interval.criteriaValue| number}}%</span><br><span ng-if="lowerBoundary && interval.indicatorValue>=previousInterval.indicatorValue">&gt;=</span> <span ng-if="lowerBoundary && interval.indicatorValue<previousInterval.indicatorValue">&lt;=</span> <span ng-if="upperBoundary && interval.indicatorValue>previousInterval.indicatorValue">&gt;=</span> <span ng-if="upperBoundary && interval.indicatorValue<=previousInterval.indicatorValue">&lt;=</span> <span ng-if="!lowerBoundary && !upperBoundary">{{previousInterval.indicatorValue||\'0\' | number}} -</span> <span>{{interval.indicatorValue| number}}</span></div><div ng-hide=!actualHeightExceeded><i class="glyphicon glyphicon-info-sign" style=color:black data-placement=top data-type=info data-animation=am-fade-and-scale bs-tooltip=tooltip></i></div></div><div class="closeIcon vCenter" ng-if="!lowerBoundary && !upperBoundary"><i ng-click="del(interval);\n                $event.stopPropagation()" ng-hide=last class="glyphicon glyphicon-remove"></i></div></div>'),a.put("templates/indicatorBandPopoverContentTemplate.html",'<form role=form name=form><div class=form-group ng-class="{\'has-error has-feedback\': form.losVal.$error.gpercent}"><label for=exampleInputEmail1>Level of satisfaction</label><input ng-model=popOverItem.criteriaValue ng-disabled="lowerBoundary || upperBoundary" gpercent name=losVal id=losVal class=form-control placeholder="Level of satisfactory"> <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show=form.losVal.$error.gpercent style="line-height: 34px; font-size: 16px" data-toggle=tooltip data-placement=left title="Invalid level of satisfaction. Must be a percent value between 0 and 100."></span></div><div class=form-group ng-class="{\'has-error has-feedback\': form.indicatorVal.$error.gnumber}"><label class=control-label for=indicatorVal>Indicator value</label><input ng-model=popOverItem.indicatorValue gnumber name=indicatorVal id=indicatorVal class=form-control placeholder="Indicator Value"> <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show=form.indicatorVal.$error.gnumber style="line-height: 34px; font-size: 16px" data-toggle=tooltip data-placement=left title="Invalid indicator value."></span></div><button type=submit class="btn btn-default" ng-disabled="form.indicatorVal.$error.gnumber || form.losVal.$error.gpercent" ng-click="updateInterval($event);\n        $hide()">Save</button></form>'),a.put("templates/indicatorBandPopoverTemplate.html","<div class=popover style=color:black ng-click=$event.stopPropagation();><div class=arrow></div><h3 class=popover-title ng-bind=title ng-show=title></h3><div class=popover-content ng-bind=content></div></div>"),a.put("templates/indicatorBandTemplate.html",'<div class=row><div class=col-lg-12><div class=row><div class=col-lg-2 style=padding-right:5px;width:12.5%><div class=progress><indicator-band-item interval=criteriaFunction.lowerBoundary previous-interval=criteriaFunction.upperBoundary lower-boundary=true on-interval-changed=updateLowerBoundary(indicatorValue) title="Criteria / Indicator values"></indicator-band-item></div></div><div class=col-lg-9><div class=row><div class=progress><indicator-band-item ng-repeat="interval in criteriaFunction.intervals" interval=interval previous-interval="$first ? criteriaFunction.lowerBoundary : criteriaFunction.intervals[$index-1]" first=$first delete-interval=deleteInterval(interval) on-interval-changed=createInterval(criteriaValue,indicatorValue) get-color=getIntervalColor(interval)></indicator-band-item><indicator-band-item interval=criteriaFunction.upperBoundary previous-interval="criteriaFunction.intervals[criteriaFunction.intervals.length-1] || criteriaFunction.lowerBoundary" last=true first="criteriaFunction.intervals.length<=0" on-interval-changed=createInterval(criteriaValue,indicatorValue) get-color=getIntervalColor(interval)></indicator-band-item></div></div><div class=row style="min-height: 20px"><div class=intervalMarker ng-style="getIntervalWidth(interval, criteriaFunction.intervals[$index - 1])" ng-repeat="interval in criteriaFunction.intervals"><span class="glyphicon glyphicon-chevron-up" style="width:16px;float:right;margin-right: -8px"></span></div></div></div><div class=col-lg-2 style="padding-left:5px;width: 12.5%"><div class=progress><indicator-band-item interval=criteriaFunction.upperBoundary previous-interval=criteriaFunction.lowerBoundary upper-boundary=true on-interval-changed=updateUpperBoundary(indicatorValue) title="Criteria / Indicator values"></indicator-band-item></div></div></div></div></div>'),a.put("templates/indicatorBarChartTemplate.html",'<div><div class=row ng-if="!worldstates || worldstates.length <= 0"><div class=col-lg-12><div ng-hide="worldstates.length > 0" class="alert alert-warning"><strong>Warning:</strong>There are no worldstates selected.</div></div></div><div class=row ng-if="worldstates && worldstates.length > 0"><div class=col-lg-12 style="text-align: center; margin: 20px 0px"><span ng-repeat="ws in worldstates" style="margin:0px 10px"><i class="glyphicon glyphicon-stop" ng-style=getLegendColor($index)></i>{{ws.name}}</span></div></div><div class=row ng-if="worldstates && worldstates.length > 0"><div class=col-lg-4 ng-repeat="chartModel in chartModels"><div class=row><div class=col-lg-12 style="text-align: center"><label>{{chartModel[0].key}}</label></div></div><div class=row><div class=col-lg12 nvd3-discrete-bar-chart style="margin-top: -40px" data=chartModel width=400 height=200 showxaxis=false showyaxis=true interactive=true showvalues=true staggerlabels=true forcey={{chartModel.forceY}} yaxistickformat=yAxisTickFormat valueformat=yAxisTickFormat color=colorFunction() tooltips=true tooltipcontent=toolTipContentFunction()><svg></svg></div></div></div></div></div>'),a.put("templates/indicatorCriteriaAxisChooserTemplate.html",'<div class=btn-group><button type=button class="btn btn-default btn-sm"><img ng-src={{selectedAxis.icon}} style="margin-right:5px;float:left">{{selectedAxis.name}}</button> <button type=button class="btn btn-default btn-sm dropdown-toggle" data-toggle=dropdown><span class=caret></span> <span class=sr-only>Toggle Dropdown</span></button><ul class=dropdown-menu role=menu><li ng-repeat="scale in scales" role=presentation ng-click=axisSelected($index) ng-class="{\'dropdown-header\':scale.isGroup}"><a ng-if=!scale.isGroup>{{scale.name}}</a> <img ng-if=scale.isGroup ng-src={{scale.icon}} style="margin-right:5px;float:left"> <span ng-if=scale.isGroup style="margin-top: 4px">{{scale.name}}</span></li></ul></div>'),a.put("templates/indicatorCriteriaTableTemplate.html",'<div id=indicatorCriteriaTable><div ng-if="!(worldstates.length > 0)" class="alert alert-warning"><strong>Warning:</strong>There are no worldstates selected.</div><div ng-if="forCriteria && !criteriaFunction" class="alert alert-warning"><strong>Warning:</strong>No criteria function selected.</div><div ng-show="!(worldstates.length <= 0 || (forCriteria && !criteriaFunction))"><table data-ng-table=tableParams class=table template-pagination=templates/nopager.html><thead><tr><th ng-repeat="column in columns" class=text-left ng-style=getCellStyle($index)>{{column.title}}<tbody><tr data-ng-repeat="row in $data" ng-class="{\'info\':isGroupRow(row)}" ng-style=getRowStyle($index)><td data-ng-repeat="col in columns" ng-style=getCellStyle($index)><img ng-if="isGroupRow(row) || detailIcons" ng-src="{{row[col.field].icon}}"> {{row[col.field].name}}</table></div></div>'),a.put("templates/levelOfEmphasisTemplate.html",'<div class="panel panel-default"><div class=panel-heading style="white-space: nowrap;\n         overflow: hidden;\n         text-overflow: ellipsis">Level of satisfaction emphasis {{model.lse}}</div><div class=panel-body><div ng-if="!expertMode && indicatorSize>=1"><form name=myForm><div class=radio><label><input type=radio ng-model=model.lse value=2> only positive</label></div><div class=radio><label><input type=radio ng-model=model.lse value=1> over-emphasise positives</label></div><div class=radio><label><input type=radio ng-model=model.lse value=0 checked> neutral</label></div><div class=radio><label><input type=radio ng-model=model.lse value=-1> over-emphasise negatives</label></div><div class=radio><label><input type=radio ng-model=model.lse value=-2> only negative</label></div></form></div><div ng-if=expertMode><div class="alert alert-warning" role=alert>Expert Mode not yet implemented!</div></div></div></div>'),a.put("templates/nopager.html",""),a.put("templates/relationAnalysisChartTemplate.html",'<div class=col-lg-12><style>.nvd3 .nv-axis.nv-x path.domain {\n            stroke-opacity: .75;\n        }</style><div ng-hide="worldstates().length > 0" class=row><div class="alert alert-warning"><strong>Warning:</strong>There are no worldstates selected.</div></div><div ng-hide="!(worldstates() && worldstates().length > 0)" class=row><div style="float: right;margin-bottom: 10px"><indicator-criteria-axis-chooser is-x-axis=false icc-object=iccObject selected-axis=yAxis></indicator-criteria-axis-chooser><indicator-criteria-axis-chooser is-x-axis=true icc-object=iccObject selected-axis=xAxis></indicator-criteria-axis-chooser></div></div><div ng-hide="!(worldstates() && worldstates().length > 0)" class=row><div class=col-lg-12 ng-hide="forCriteria && !(yAxisCriteriaFunction && xAxisCriteriaFunction)"><div nvd3-scatter-chart data=chartdata showlegend=true interactive=true tooltips=true sizerange=[80,80] zscale=zScale showdistx=true showdisty=true xaxislabel={{xAxis.name}} yaxislabel={{yAxis.name}} margin={left:90,top:0,bottom:50,right:50} yaxistickformat=yAxisTickFormatFunction() xaxistickformat=xAxisTickFormatFunction() height={{chartHeight}}><svg></svg></div></div><div class=col-lg-12 ng-hide="!forCriteria || (yAxisCriteriaFunction && xAxisCriteriaFunction)"><div class="alert alert-warning"><strong>Warning:</strong>No criteria function selected.</div></div></div></div>'),a.put("templates/worldstateAnalysisWidgetTemplate.html",'<div class=col-lg-12><div class=row><div class="panel panel-default"><div class=panel-heading style=display:table;width:100%><i class="glyphicon glyphicon-list-alt"></i><h3 style="display:table-cell;vertical-align: middle" class=panel-title>Worldstate ranking table</h3><div class=pull-right><div class=input-group><div class=input-group-btn style="display: block" ng-click=persistDecisionStrategies()><button type=button class="btn btn-sm btn-primary dropdown-toggle" data-toggle=dropdown ng-disabled=disabled>Change Mode <span class=caret></span></button><ul class=dropdown-menu role=menu><li style="padding-left: 10px"><input type=checkbox ng-model=showTableIndicators> Show Indicators</li><li style="padding-left: 10px"><input type=checkbox ng-model=showTableRadarChart> Show radar chart</li></ul></div></div></div></div><div class=panel-body><worldstate-ranking-table worldstates=worldstates criteria-function=selectedCriteriaFunction decision-strategy=selectedDecisionStrategy show-indicators=showTableIndicators show-radar-chart=showTableRadarChart></worldstate-ranking-table></div></div></div><div class=row><div class="panel panel-default"><div class=panel-heading><span class=pull-left><i class="glyphicon glyphicon-list-alt"></i><h3 style=display:inline class=panel-title ng-if=!forCriteriaTable>Indicator table</h3><h3 style=display:inline class=panel-title ng-if=forCriteriaTable>Criteria table</h3></span> <span class=pull-right><div class=btn-group><button type=button class="btn btn-sm btn-primary dropdown-toggle" data-toggle=dropdown ng-disabled=disabled>Change Mode <span class=caret></span></button><ul class=dropdown-menu role=menu><li><a ng-click="forCriteriaTable = false"><i ng-show=!forCriteriaTable class="glyphicon glyphicon-ok-circle"></i> <span ng-style="{\n                                                        \'padding-left\'\n                                                        : !forCriteriaTable? \'0px\': \'19px\'}">Indicator</span></a></li><li><a ng-click="forCriteriaTable = true"><i ng-show=forCriteriaTable class="glyphicon glyphicon-ok-circle"></i> <span ng-style="{\n                                                        \'padding-left\'\n                                                        : forCriteriaTable? \'0px\': \'19px\'}">Criteria</span></a></li></ul></div></span> <span class=clearfix></span></div><div class=panel-body><indicator-criteria-table worldstates=worldstates for-criteria=forCriteriaTable criteria-function=selectedCriteriaFunction></indicator-criteria-table></div></div></div><div class=row><div class="panel panel-default"><div class=panel-heading><i class="glyphicon glyphicon-stats"></i><h3 style=display:inline class=panel-title>Indicator bar charts</h3></div><div class=panel-body><indicator-bar-charts worldstates=worldstates></indicator-bar-charts></div></div></div><div class=row><div class="panel panel-default"><div class=panel-heading><span class=pull-left><span class=widget-icon><i class="fa fa-table"></i></span><h3 style=display:inline class=panel-title>Worldstate relation analysis chart</h3></span> <span class=pull-right><div class=btn-group><button type=button class="btn btn-sm btn-primary dropdown-toggle" data-toggle=dropdown ng-disabled=disabled>Change Mode <span class=caret></span></button><ul class=dropdown-menu role=menu><li><a ng-click="isCriteria = false"><i ng-show=!isCriteria class="glyphicon glyphicon-ok-circle"></i> <span ng-style="{\n                                                        \'padding-left\'\n                                                        : !isCriteria? \'0px\': \'19px\'}">Indicator</span></a></li><li><a ng-click="isCriteria = true"><i ng-show=isCriteria class="glyphicon glyphicon-ok-circle"></i> <span ng-style="{\n                                                        \'padding-left\'\n                                                        : isCriteria? \'0px\': \'19px\'}">Criteria</span></a></li></ul></div></span> <span class=clearfix></span></div><div class=panel-body><relation-analysis-chart style=padding-left:50px height=350 for-criteria=isCriteria worldstates=worldstates criteria-function=selectedCriteriaFunction></relation-analysis-chart></div></div></div><div class=row><div class="panel panel-default"><div class=panel-heading><span class=pull-left><span class=widget-icon><i class="fa fa-table"></i></span><h3 style=display:inline class=panel-title>Criteria radar chart comparison</h3></span> <span class=pull-right></span> <span class=clearfix></span></div><div class=panel-body><div class=col-lg-3><div class=row><label>Reference Worldstate</label></div><div class=row><select multiple ng-model=worldstateRef ng-options="ws.name for ws in allWorldstates" style="width: 100%;height: 100%"></select></div></div><div class=col-lg-9><div class=row><div class=col-lg-4 ng-repeat="chartModel in chartModels"><div class="panel panel-default"><div class=panel-heading><h3 class="panel-title ng-binding"><i class="fa fa-globe"></i> {{chartModel[0].name}}</h3></div><div class="panel-body no-padding text-align-center"><div style="margin: 0 auto; padding-top: 20px" criteria-radar worldstates=chartModel criteria-function=selectedCriteriaFunction show-legend=true show-axis-text=true></div></div></div></div></div></div></div></div></div><div class=row><div class="panel panel-default"><div class=panel-heading style=display:table;width:100%><h3 style="display:table-cell;vertical-align: middle" class=panel-title>Decision strategies</h3><div class=pull-right><div class=input-group><div class=input-group-btn style="display: block" ng-click=persistDecisionStrategies()><button type=button class="btn btn-success btn-sm" style="min-width: 80px"><span style=display:block;float:left><i ng-if="!showDsPersistSpinner && !showDsPersistDone" class="glyphicon glyphicon-floppy-disk"></i> <i ng-if=showDsPersistSpinner class="spin glyphicon glyphicon-refresh"></i> <i ng-if=showDsPersistDone class="glyphicon glyphicon-ok"></i></span> <span style=display:block;float:right>Persist</span></button></div></div></div></div><div class=panel-body><decision-strategy-manager worldstates=worldstates decision-strategies=decisionStrategies></decision-strategy-manager></div></div></div><div class=row><div class="panel panel-default"><div class=panel-heading style=display:table;width:100%><h3 style="display:table-cell;vertical-align: middle" class=panel-title>Criteria functions</h3><div class=pull-right><div class=input-group><div class=input-group-btn style="display: block" ng-click=persistCriteriaFunctions()><button type=button class="btn btn-success btn-sm" style="min-width: 80px"><span style=display:block;float:left><i ng-if="!showPersistSpinner && !showPersistDone" class="glyphicon glyphicon-floppy-disk"></i> <i ng-if=showPersistSpinner class="spin glyphicon glyphicon-refresh"></i> <i ng-if=showPersistDone class="glyphicon glyphicon-ok"></i></span> <span style=display:block;float:right>Persist</span></button></div></div></div></div><div class=panel-body><criteria-function-manager worldstates=worldstates criteria-functions=criteriaFunctionSets></criteria-function-manager></div></div></div></div>'),a.put("templates/worldstateRankingTableTemplate.html",'<div id=worldstateRankingTable style="overflow-x: auto"><div ng-if="!(worldstates.length > 0)" class="alert alert-warning"><strong>Warning:</strong>There are no worldstates selected.</div><div ng-if="!(criteriaFunction || worldstates.length <= 0)" class="alert alert-warning"><strong>Warning:</strong>No criteria function selected.</div><div ng-if="!(decisionStrategy || worldstates.length <= 0)" class="alert alert-warning"><strong>Warning:</strong>No decision strategy selected.</div><div ng-show="((worldstates.length > 0) && criteriaFunction && decisionStrategy)"><table ng-table=tableParams show-filter=false class="table table-striped" style="white-space: nowrap"><thead><tr><th ng-repeat="column in columns" ng-if="$index < 3">{{column.title}}<th ng-if=showRadarChart>Criteria radar<th ng-repeat="column in columns" ng-if="showIndicators && $index >= 3">{{column.title}}<tbody><tr ng-repeat="item in $data"><td ng-repeat="col in columns" ng-if="$index < 3" style="vertical-align: middle">{{item[col.field]}}<td ng-if=showRadarChart style="min-width:150px; width:150px; margin: 0 auto; padding-top: 20px" criteria-radar worldstates=[item.ws] show-legend=false show-axis-text=true use-numbers=true criteria-function=criteriaFunction ng-click=clickToOpen($index)><td ng-repeat="col in columns" ng-if="showIndicators && $index >= 3" style="vertical-align: middle"><span>{{item[col.field].indicator}}<br>{{item[col.field].los}}</span></table></div></div>')
}]);
//# sourceMappingURL=worldstate-analysis-widgets.min.js.map